package me.gamrboy4life.paradox.analysis;
import me.gamrboy4life.paradox.Sotuken;

public class DataParser {
	
	public void parseData(String data) {
		int i=0; 
		//1行保存するため
		StringBuilder message=new StringBuilder();
		
		while(i<data.length()) {
			char c=data.charAt(i);
			
			if(c=='\n') {
				
				//関数判定のための文字列
				String line=message.toString();
				
				//setblock関数の判定
				if(isSetBlock(line)) {
					executeSetBlock(line);
				}else {
					//マインクラフトチャットに表示
					Sotuken.instance.moduleManager.addRunChatMessage(message.toString());	
				}
				
				
				message.setLength(0); //次の保存するメッセージを初期化
			}else {
				//改行ではない場合はmessageに追加
				message.append(c);
			}
			i++;
		}
		
		
		
		//ループ終了後，残りの文字があれば表示
		if(message.length()>0) {
			
			//関数判定のための文字列
			String line=message.toString();
			if(isSetBlock(line)) {
				executeSetBlock(line);
			}else {
				Sotuken.instance.moduleManager.addRunChatMessage(message.toString());
			}
		}
	}
	

	//setblock関数を判定
	private boolean isSetBlock(String line) {
		//行が99999で始まっているかチェック
		return line.startsWith("99999,");
	}
	
	
	//setblock関数を実行
	private void executeSetBlock(String line) {
	
		try {
			//lineをカンマで分割
			String part=line.split(",");
			
			
		}catch (NumberFormatException e) {
			Sotuken.instance.moduleManager.addRunChatMessage("Error parsing setblock command: "+e.getMessage());
			
		}
		
	}
	
}